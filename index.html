<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live by Quran</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&family=Scheherazade+New&family=Calibri&display=swap" rel="stylesheet">
  <style>
    /* Reset & Vars */
    * { margin:0; padding:0; box-sizing:border-box }
    html,body { height:100%; overflow:hidden; position:relative }
    :root {
      --day-overlay: rgba(255,255,255,0);
      --night-overlay: rgba(0,0,0,0.2);
      --text-day: #222;
      --text-night: #f2f2f2;
      --btn-day: #ffe58a;
      --btn-night: #bfa76d;
    }

    /* Background & Day/Night */
    body {
      font-family:Calibri,sans-serif;
      background: url('quran_background.png') center bottom/cover no-repeat;
      color: var(--text-day);
    }
    body::before {
      content:'';
      position:absolute; inset:0;
      background: var(--day-overlay);
      transition: background 1s;
      z-index:0;
    }
    body.night {
      color: var(--text-night);
    }
    body.night::before {
      background: var(--night-overlay);
    }

    /* Birds (flapping & drifting) */
    .bird-container {
      position:absolute; top:0; left:-15%;
      transform-origin:center; z-index:0;
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    .bird-container-one   { animation: fly-path 30s linear -5s infinite; }
    .bird-container-two   { animation: fly-path 28s linear -3s infinite; }
    .bird-container-three { animation: fly-path 32s linear -7s infinite; }
    .bird-container-four  { animation: fly-path 26s linear -2s infinite; }

    .bird {
      width:88px; height:125px;
      background:url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/174479/bird-cells-new.svg') 0 0 no-repeat;
      background-size:auto 100%;
      animation: flap 1s steps(10) infinite;
      filter: invert(34%) sepia(55%) saturate(427%) hue-rotate(141deg)
              brightness(93%) contrast(91%);
    }
    .bird-one   { animation-delay: -0.5s;   }
    .bird-two   { animation-duration: 1.1s; animation-delay: -0.7s; }
    .bird-three { animation-duration: 0.9s; animation-delay: -0.3s; }
    .bird-four  { animation-duration: 1.25s;animation-delay: -0.4s; }

    @keyframes flap {
      100% { background-position: -900px 0; }
    }
    @keyframes fly-path {
      0%   { transform: translateX(-15vw) translateY(10vh) scale(0.4); }
      25%  { transform: translateX(25vw)  translateY(6vh)  scale(0.45);}
      50%  { transform: translateX(55vw)  translateY(12vh) scale(0.5); }
      75%  { transform: translateX(85vw)  translateY(8vh)  scale(0.55);}
      100% { transform: translateX(115vw) translateY(10vh) scale(0.6); }
    }

    /* Header & Nav */
    header {
      position:absolute; top:20px; left:20px; right:20px;
      display:flex; justify-content:space-between; align-items:center;
      z-index:1;
    }
    .logo img { height:50px; }
    nav a {
      margin-left:20px; color:inherit; text-decoration:none;
      opacity:.9; transition:opacity .2s;
    }
    nav a:hover { opacity:1; }

    /* Date Display (stacked, larger) */
    #date-display {
      position:absolute; top:90px; right:30px;
      text-align:right; line-height:1.2; z-index:1;
    }
    #date-display .isl {
      font-size:1.3rem; display:block;
    }
    #date-display .greg {
      font-size:1rem; font-weight:bold; display:block;
    }

    /* Main (moved up to 20%) */
    .main {
      position:absolute; top:20%; left:50%;
      transform:translate(-50%,-10%);
      text-align:center; width:90%; max-width:800px;
      z-index:1;
    }
    h1 {
      font-family:'Playfair Display',serif;
      font-size:3.2rem; margin-bottom:.3em;
      text-shadow:2px 2px 8px rgba(0,0,0,0.6);
    }
    .tagline {
      font-style:italic; font-size:1.2rem; margin-bottom:1em;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }
    .ayah {
      margin:2em 0; line-height:1.6;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }
    .ayah strong {
      display:block; font-size:1.6rem; margin-bottom:.5em;
    }
    .ayah .arabic {
      font-family:'Scheherazade New',serif;
      font-size:2rem; direction:rtl; margin-bottom:.5em;
    }

    /* Navigation Buttons (in front of stone) */
    .buttons {
      position:absolute; bottom:200px; left:50%;
      transform:translateX(-50%);
      display:flex; gap:1em; z-index:1;
    }
    .buttons button {
      padding:.75em 1.5em; border:2px solid var(--btn-day);
      background:transparent; border-radius:5px;
      font-weight:bold; cursor:pointer;
      transition:background .3s,color .3s;
    }
    body.night .buttons button { border-color:var(--btn-night) }
    .buttons button:hover {
      background:var(--btn-day); color:#333;
    }
    body.night .buttons button:hover {
      background:var(--btn-night); color:#333;
    }

    /* Subscribe Bar */
    .subscribe-bar {
      position:absolute; bottom:40px; left:50%;
      transform:translateX(-50%);
      display:flex; width:80%; max-width:500px;
      box-shadow:0 4px 12px rgba(0,0,0,0.4);
      z-index:1;
    }
    .subscribe-bar input {
      flex:1; padding:.75em; border:none; font-size:1rem;
      border-radius:5px 0 0 5px;
    }
    .subscribe-bar button {
      padding:.75em 1em; border:none;
      background:var(--btn-day); color:#333;
      font-weight:bold; border-radius:0 5px 5px 0;
      cursor:pointer; transition:background .3s;
    }
    body.night .subscribe-bar button { background:var(--btn-night) }

  </style>
</head>
<body>

  <!-- Birds -->
  <div class="bird-container bird-container-one"><div class="bird bird-one"></div></div>
  <div class="bird-container bird-container-two"><div class="bird bird-two"></div></div>
  <div class="bird-container bird-container-three"><div class="bird bird-three"></div></div>
  <div class="bird-container bird-container-four"><div class="bird bird-four"></div></div>

  <header>
    <div class="logo"><img src="Livebyquran Logo.PNG" alt="Live by Quran"></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="books.html">Books</a>
      <a href="lectures.html">Audio Lectures</a>
      <a href="articles.html">Articles</a>
      <a href="qa.html">Q&A</a>
      <a href="#"><img src="email-icon.png" alt="Contact" style="height:24px;"></a>
    </nav>
  </header>

  <div id="date-display">
    <span class="isl">Loading Islamic date…</span>
    <span class="greg">Loading Gregorian date…</span>
  </div>

  <div class="main">
    <h1>Live by Quran</h1>
    <div class="tagline">Learn. Reflect. Transform.</div>
    <div class="ayah" id="ayah">Loading Ayah…</div>
  </div>

  <div class="buttons">
    <button onclick="location.href='books.html'">Explore Books</button>
    <button onclick="location.href='lectures.html'">Listen to Lectures</button>
    <button onclick="location.href='articles.html'">Read Articles</button>
    <button onclick="location.href='qa.html'">Q&A</button>
  </div>

  <div class="subscribe-bar">
    <input type="email" placeholder="Email address">
    <button>Subscribe</button>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    // 1) Day/Night
    function applyTheme() {
      const h = new Date().getHours();
      document.body.classList.toggle('night', h < 6 || h >= 18);
    }
    applyTheme(); setInterval(applyTheme, 60000);

    // 2) Dates
    function showDates(){
      const n = new Date();
      document.querySelector('.greg').textContent =
        new Intl.DateTimeFormat('en-US',{
          weekday:'long', day:'numeric', month:'long', year:'numeric'
        }).format(n);
      document.querySelector('.isl').textContent =
        new Intl.DateTimeFormat('en-GB-u-ca-islamic',{
          day:'numeric', month:'long', year:'numeric'
        }).format(n) + ' AH';
    }
    showDates(); setInterval(showDates, 3600000);

    // 3) Ayah-of-the-Day
    Papa.parse('ayahs.csv', {
      download:true, header:true, skipEmptyLines:true,
      complete(r){
        const list = r.data.filter(x=>x.surah && x.translation);
        const today = new Date(), start = new Date(today.getFullYear(),0,0);
        const idx = Math.floor((today - start)/(1000*60*60*24)) % list.length;
        const v = list[idx];
        if(v) document.getElementById('ayah').innerHTML =
          `<strong>${v.surah} — Verse ${v.verse}</strong>
           <div class="arabic">${v.arabic}</div>
           <div>${v.translation}</div>`;
      },
      error(){ document.getElementById('ayah').textContent='Error loading Ayah.'; }
    });
  </script>
</body>
</html>
