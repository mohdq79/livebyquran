<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live by the Qur’an</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New&family=Calibri&display=swap" rel="stylesheet">
  <style>
    /* --- Reset & Base Variables --- */
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; overflow:hidden; }
    :root {
      --day-bg: linear-gradient(to top, #dceeff, #eaf7ff);
      --night-bg: linear-gradient(to top, #1b2735, #090a0f);
      --text-day: #222; --text-night: #f2f2f2;
      --button-day: #ffe58a; --button-night: #bfa76d;
    }
    body {
      font-family:'Calibri',sans-serif;
      background:var(--day-bg);
      color:var(--text-day);
      transition:background 1s,color 1s;
      position:relative;
    }
    body.night {
      background:var(--night-bg);
      color:var(--text-night);
    }

    /* --- Bird Animation (Behind Everything) --- */
    .bird-container {
      position:absolute;
      top: 10%; left: -10%;
      transform: scale(0.3) translateX(-10vw);
      will-change: transform;
      z-index: 0; /* Sit behind all content */
      animation-timing-function: linear;
      animation-iteration-count: infinite;
    }
    .bird-container-one   { animation-name: fly-right-one;   animation-duration: 15s; animation-delay: 0s; }
    .bird-container-two   { animation-name: fly-right-two;   animation-duration: 16s; animation-delay: 1s; }
    .bird-container-three { animation-name: fly-right-one;   animation-duration: 14.6s; animation-delay: 9.5s; }
    .bird-container-four  { animation-name: fly-right-two;   animation-duration: 16s; animation-delay: 10.25s; }

    .bird {
      background-image: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/174479/bird-cells-new.svg');
      filter: invert(34%) sepia(55%) saturate(427%) hue-rotate(141deg) brightness(93%) contrast(91%);
      background-size: auto 100%;
      width: 88px; height: 125px;
      will-change: background-position;
      animation-name: fly-cycle;
      animation-timing-function: steps(10);
      animation-iteration-count: infinite;
      /* Color will follow body text-color via `filter` above */
    }
    .bird-one   { animation-duration: 1s;   animation-delay: -0.5s;  }
    .bird-two   { animation-duration: 0.9s; animation-delay: -0.75s; }
    .bird-three { animation-duration: 1.25s;animation-delay: -0.25s; }
    .bird-four  { animation-duration: 1.1s; animation-delay: -0.5s;  }

    @keyframes fly-cycle {
      100% { background-position: -900px 0; }
    }

    @keyframes fly-right-one {
      0%   { transform: scale(0.3) translateX(-10vw); }
      10%  { transform: translateY(2vh)  translateX(10vw)  scale(0.4); }
      20%  { transform: translateY(0vh)  translateX(30vw)  scale(0.5); }
      30%  { transform: translateY(4vh)  translateX(50vw)  scale(0.6); }
      40%  { transform: translateY(2vh)  translateX(70vw)  scale(0.6); }
      50%  { transform: translateY(0vh)  translateX(90vw)  scale(0.6); }
      60%  { transform: translateY(0vh)  translateX(110vw) scale(0.6); }
      100% { transform: translateY(0vh)  translateX(110vw) scale(0.6); }
    }

    @keyframes fly-right-two {
      0%   { transform: translateY(-2vh) translateX(-10vw) scale(0.5); }
      10%  { transform: translateY(0vh)  translateX(10vw)  scale(0.4); }
      20%  { transform: translateY(-4vh) translateX(30vw)  scale(0.6); }
      30%  { transform: translateY(1vh)  translateX(50vw)  scale(0.45); }
      40%  { transform: translateY(-2.5vh)translateX(70vw)  scale(0.5); }
      50%  { transform: translateY(0vh)  translateX(90vw)  scale(0.45); }
      100% { transform: translateY(0vh)  translateX(110vw) scale(0.45); }
    }

    /* --- Header & Nav (Above Birds) --- */
    header {
      position:absolute; top:20px; left:20px; right:20px;
      display:flex; justify-content:space-between; align-items:center;
      z-index:1;
    }
    .logo img { height:50px; }
    nav a {
      margin-left:20px; text-decoration:none;
      color:inherit; opacity:0.9; transition:opacity .2s;
    }
    nav a:hover { opacity:1; }

    /* --- Date Display --- */
    #date-display {
      position:absolute; top:90px; right:30px;
      font-size:0.9rem; opacity:0.8; z-index:1;
    }

    /* --- Main Content --- */
    .main {
      position:absolute; top:35%; left:50%;
      transform:translate(-50%,-40%);
      text-align:center; width:90%; max-width:800px;
      z-index:1;
    }
    h1 {
      font-family:'Scheherazade New',serif;
      font-size:3rem; text-shadow:2px 2px 8px rgba(0,0,0,0.6);
    }
    .tagline {
      margin-top:8px; font-size:1.2rem; font-style:italic;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }
    .ayah {
      margin:2rem 0; line-height:1.6;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }
    .ayah .arabic {
      font-family:'Scheherazade New',serif;
      font-size:1.6rem; direction:rtl; margin:0.5rem 0;
    }

    /* --- Buttons & Subscribe Bar --- */
    .buttons {
      display:flex; justify-content:center; gap:16px; flex-wrap:wrap;
      margin-top:1rem; z-index:1;
    }
    .buttons button {
      padding:0.75rem 1.5rem; border:2px solid var(--button-day);
      background:transparent; color:inherit; border-radius:5px;
      font-weight:bold; cursor:pointer;
      transition:background .3s,color .3s;
    }
    body.night .buttons button { border-color:var(--button-night); }
    .buttons button:hover {
      background:var(--button-day); color:#333;
    }
    body.night .buttons button:hover {
      background:var(--button-night); color:#333;
    }

    .subscribe-bar {
      position:absolute; bottom:40px; left:50%;
      transform:translateX(-50%);
      display:flex; width:80%; max-width:500px;
      box-shadow:0 4px 12px rgba(0,0,0,0.4);
      z-index:1;
    }
    .subscribe-bar input {
      flex:1; padding:12px 16px; border:none;
      font-size:1rem; border-radius:5px 0 0 5px;
    }
    .subscribe-bar button {
      padding:12px 16px; border:none;
      background:var(--button-day); color:#333;
      font-size:1rem; font-weight:bold; cursor:pointer;
      border-radius:0 5px 5px 0;
      transition:background .3s;
    }
    body.night .subscribe-bar button { background:var(--button-night); }
  </style>
</head>
<body>

  <!-- Four bird containers (behind all content) -->
  <div class="bird-container bird-container-one">
    <div class="bird bird-one"></div>
  </div>
  <div class="bird-container bird-container-two">
    <div class="bird bird-two"></div>
  </div>
  <div class="bird-container bird-container-three">
    <div class="bird bird-three"></div>
  </div>
  <div class="bird-container bird-container-four">
    <div class="bird bird-four"></div>
  </div>

  <header>
    <div class="logo"><img src="Livebyquran Logo.PNG" alt="Live by Quran"></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="books.html">Books</a>
      <a href="lectures.html">Audio Lectures</a>
      <a href="articles.html">Articles</a>
      <a href="qa.html">Q&A</a>
      <a href="#"><img src="email-icon.png" alt="Contact" style="height:24px;"></a>
    </nav>
  </header>

  <div id="date-display"></div>

  <div class="main">
    <h1>Live by the Qur’an</h1>
    <div class="tagline">Learn. Reflect. Transform.</div>
    <div class="ayah" id="ayah">Loading…</div>
    <div class="buttons">
      <button onclick="location.href='books.html'">Explore Books</button>
      <button onclick="location.href='lectures.html'">Listen to Lectures</button>
      <button onclick="location.href='articles.html'">Read Articles</button>
      <button onclick="location.href='qa.html'">Q&A</button>
    </div>
  </div>

  <div class="subscribe-bar">
    <input type="email" placeholder="Email address">
    <button>Subscribe</button>
  </div>

  <!-- PapaParse & Utility Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    // 1) Day/Night Theme
    function applyTheme(){
      const h = new Date().getHours();
      document.body.classList.toggle('night', h<6||h>=18);
    }
    applyTheme();
    setInterval(applyTheme, 60_000);

    // 2) Date Display
    function showDates(){
      const now = new Date();
      const greg = new Intl.DateTimeFormat('en-US', {
        weekday:'long', day:'numeric', month:'long', year:'numeric'
      }).format(now);
      const isl = new Intl.DateTimeFormat('en-GB-u-ca-islamic', {
        day:'numeric', month:'long', year:'numeric'
      }).format(now) + ' AH';
      document.getElementById('date-display').textContent = isl + ' • ' + greg;
    }
    showDates();
    setInterval(showDates, 3_600_000);

    // 3) Ayah of the Day
    Papa.parse('ayahs.csv', { download:true, header:true, skipEmptyLines:true,
      complete(r){
        const list = r.data.filter(a=>a.surah&&a.translation);
        const today=new Date(), start=new Date(today.getFullYear(),0,0);
        const doy=Math.floor((today-start)/(1000*60*60*24));
        const v=list[doy%list.length];
        if(v){
          document.getElementById('ayah').innerHTML=`
            <strong>${v.surah} — Verse ${v.verse}</strong>
            <div class="arabic">${v.arabic}</div>
            <div>${v.translation}</div>`;
        }
      },
      error(){ document.getElementById('ayah').textContent='Could not load Ayah.';}
    });
  </script>
</body>
</html>
