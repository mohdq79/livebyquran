<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Live by the Qur’an</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Scheherazade New for Arabic, Calibri for translation -->
  <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New&family=Calibri&display=swap" rel="stylesheet">
  <style>
    /* Reset and CSS Variables */
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; overflow:hidden; }
    :root {
      --day-bg: linear-gradient(to top, #dceeff, #eaf7ff);
      --night-bg: linear-gradient(to top, #1b2735, #090a0f);
      --text-day: #222;
      --text-night: #f2f2f2;
      --button-day: #ffe58a;
      --button-night: #bfa76d;
    }
    body {
      font-family: 'Calibri', sans-serif;
      background: var(--day-bg);
      color: var(--text-day);
      transition: background 1s, color 1s;
      position: relative;
    }
    body.night {
      background: var(--night-bg);
      color: var(--text-night);
    }

    /* Header & Navigation */
    header {
      position:absolute; top:20px; left:20px; right:20px;
      display:flex; justify-content:space-between; align-items:center;
    }
    .logo img { height:50px; }
    nav a {
      margin-left:20px; text-decoration:none;
      color:inherit; opacity:0.9; transition: opacity .2s;
    }
    nav a:hover { opacity:1; }

    /* Date Display */
    #date-display {
      position:absolute; top:90px; right:30px;
      font-size:0.9rem; opacity:0.8;
    }

    /* Main Content */
    .main {
      position:absolute; top:35%; left:50%; transform:translate(-50%,-40%);
      text-align:center; width:90%; max-width:800px;
    }
    h1 {
      font-family:'Scheherazade New', serif;
      font-size:3rem; text-shadow:2px 2px 8px rgba(0,0,0,0.6);
    }
    .tagline {
      margin-top:8px; font-size:1.2rem; font-style:italic;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }

    /* Ayah of the Day */
    .ayah {
      margin:2rem 0; line-height:1.6;
      text-shadow:1px 1px 6px rgba(0,0,0,0.6);
    }
    .ayah .arabic {
      font-family:'Scheherazade New', serif;
      font-size:1.6rem; direction:rtl; margin:0.5rem 0;
    }

    /* Buttons */
    .buttons {
      display:flex; justify-content:center; gap:16px; flex-wrap:wrap;
      margin-top:1rem;
    }
    .buttons button {
      padding:0.75rem 1.5rem; border:2px solid var(--button-day);
      background:transparent; color:inherit; border-radius:5px;
      font-weight:bold; cursor:pointer;
      transition:background .3s, color .3s;
    }
    body.night .buttons button { border-color:var(--button-night); }
    .buttons button:hover {
      background:var(--button-day); color:#333;
    }
    body.night .buttons button:hover {
      background:var(--button-night); color:#333;
    }

    /* Subscribe Bar */
    .subscribe-bar {
      position:absolute; bottom:40px; left:50%; transform:translateX(-50%);
      display:flex; width:80%; max-width:500px;
      box-shadow:0 4px 12px rgba(0,0,0,0.4);
    }
    .subscribe-bar input {
      flex:1; padding:12px 16px; border:none; font-size:1rem;
      border-radius:5px 0 0 5px;
    }
    .subscribe-bar button {
      padding:12px 16px; border:none;
      background:var(--button-day); color:#333;
      font-weight:bold; font-size:1rem; cursor:pointer;
      border-radius:0 5px 5px 0;
      transition:background .3s;
    }
    body.night .subscribe-bar button { background:var(--button-night); }

    /* Flying Birds Animation */
    @keyframes fly {
      0%   { transform: translateX(-50px)   translateY(0)      scale(0.8); opacity:0.7; }
      50%  { opacity:1; }
      100% { transform: translateX(100vw)   translateY(-30px)  scale(1);   opacity:0.7; }
    }
    .bird {
      position:absolute; width:40px; height:25px;
      animation:fly linear infinite;
      pointer-events:none;
    }
  </style>
</head>
<body>

  <!-- SVG Template for Birds -->
  <svg id="bird-template" width="40" height="25" viewBox="0 0 40 25" style="display:none;">
    <path d="M2 12c5-10 10 0 20-2c8-1 12 8 16 2" fill="none" stroke="currentColor" stroke-width="2"/>
  </svg>

  <header>
    <div class="logo">
      <img src="Livebyquran Logo.PNG" alt="Live by Quran">
    </div>
    <nav>
      <a href="#">Home</a>
      <a href="#">Books</a>
      <a href="#">Audio Lectures</a>
      <a href="#">Articles</a>
      <a href="#">Q&A</a>
      <a href="#"><img src="email-icon.png" alt="Contact" style="height:24px;"></a>
    </nav>
  </header>

  <div id="date-display"></div>

  <div class="main">
    <h1>Live by the Qur’an</h1>
    <div class="tagline">Learn. Reflect. Transform.</div>
    <div class="ayah" id="ayah">Loading…</div>
    <div class="buttons">
      <button>Explore Books</button>
      <button>Listen to Lectures</button>
      <button>Read Articles</button>
      <button>Q&A</button>
    </div>
  </div>

  <div class="subscribe-bar">
    <input type="email" placeholder="Email address">
    <button>Subscribe</button>
  </div>

  <!-- Dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    // 1) Day/Night Theme
    function applyTheme() {
      const hr = new Date().getHours();
      document.body.classList.toggle('night', hr < 6 || hr >= 18);
    }
    applyTheme();
    setInterval(applyTheme, 60_000);

    // 2) Date Display (Islamic + Gregorian)
    function showDates() {
      const now = new Date();
      const greg = new Intl.DateTimeFormat('en-US', {
        weekday:'long', day:'numeric', month:'long', year:'numeric'
      }).format(now);
      const isl = new Intl.DateTimeFormat('en-GB-u-ca-islamic', {
        day:'numeric', month:'long', year:'numeric'
      }).format(now) + ' AH';
      document.getElementById('date-display').textContent = isl + ' • ' + greg;
    }
    showDates();
    setInterval(showDates, 3_600_000);

    // 3) Ayah of the Day (from ayahs.csv)
    Papa.parse('ayahs.csv', {
      download: true, header: true, skipEmptyLines: true,
      complete(res) {
        const list = res.data.filter(a => a.surah && a.translation);
        const now = new Date(), start = new Date(now.getFullYear(),0,0);
        const doy = Math.floor((now-start)/(1000*60*60*24));
        const verse = list[doy % list.length];
        if (verse) {
          document.getElementById('ayah').innerHTML = `
            <strong>${verse.surah} — Verse ${verse.verse}</strong>
            <div class="arabic">${verse.arabic}</div>
            <div>${verse.translation}</div>`;
        }
      },
      error() { document.getElementById('ayah').textContent = 'Could not load Ayah.'; }
    });

    // 4) Flying Birds Spawner
    function spawnBird() {
      const tpl = document.getElementById('bird-template'),
            b = tpl.cloneNode(true);
      b.removeAttribute('id');
      b.classList.add('bird');
      b.style.display = 'block';
      b.style.top = (20 + Math.random()*60) + 'vh';
      b.style.color = document.body.classList.contains('night') ? '#fff' : '#333';
      b.style.animationDuration = (8 + Math.random()*5) + 's';
      document.body.appendChild(b);
      b.addEventListener('animationend', () => b.remove());
    }
    setInterval(spawnBird, 3000 + Math.random()*3000);
  </script>
</body>
</html>
