<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Live by Quran</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Scheherazade+New&family=Calibri&display=swap" rel="stylesheet">
<style>
  /* Reset + Vars */
  * { margin:0; padding:0; box-sizing:border-box }
  html,body { height:100%; overflow:hidden; position:relative }
  :root {
    --day-overlay: rgba(255,255,255,0);
    --night-overlay: rgba(0,0,50,0.4);
    --text-day: #222;
    --text-night: #f2f2f2;
    --btn-day: #ffe58a;
    --btn-night: #bfa76d;
  }
  body {
    font-family:Calibri,sans-serif;
    background: url('quran_background.png') center bottom/cover no-repeat;
    color: var(--text-day);
  }
  /* Day/Night */
  body::before {
    content:''; position:absolute; top:0; left:0; right:0; bottom:0;
    background: var(--day-overlay);
    transition: background 1s;
    z-index: 0;
  }
  body.night::before {
    background: var(--night-overlay);
  }
  body.night { color: var(--text-night) }

  /* Birds (randomized durations & paths) */
  .bird-container {
    position:absolute; top:0; left:-10%;
    transform-origin: center;
    z-index:0;
  }
  .bird {
    width:88px; height:125px;
    background:url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/174479/bird-cells-new.svg') no-repeat;
    background-size:auto 100%;
    filter: invert(34%) sepia(55%) saturate(427%) hue-rotate(141deg) brightness(93%) contrast(91%);
    animation:fly-cycle steps(10) infinite;
  }
  @keyframes fly-cycle { 100% { background-position: -900px 0 } }

  /* We'll apply this single keyframe with CSS vars for variation */
  @keyframes fly-right {
    0%   { transform: translateX(-10vw) translateY(var(--start-y)) scale(var(--scale)); }
    100% { transform: translateX(110vw) translateY(calc(var(--start-y) + var(--drift))) scale(var(--scale)); }
  }

  /* Header & Nav */
  header {
    position:absolute; top:20px; left:20px; right:20px;
    display:flex; justify-content:space-between; align-items:center;
    z-index:1;
  }
  .logo img { height:50px; }
  nav a {
    margin-left:20px; color:inherit; text-decoration:none;
    opacity:.9; transition:opacity .2s;
  }
  nav a:hover { opacity:1 }

  /* Date Display */
  #date-display {
    position:absolute; top:90px; right:30px;
    text-align:right; line-height:1.2;
    font-size:1rem; z-index:1;
  }
  #date-display .greg { display:block; font-weight:bold }
  #date-display .isl { display:block; font-size:1.1rem }

  /* Main */
  .main {
    position:absolute; top:35%; left:50%;
    transform:translate(-50%,-40%);
    text-align:center; width:90%; max-width:800px;
    z-index:1;
  }
  h1 {
    font-family:'Scheherazade New',serif;
    font-size:3rem; margin-bottom:.3em;
  }
  .tagline {
    font-style:italic; font-size:1.2rem; margin-bottom:1em;
  }
  .ayah {
    margin:2em 0; line-height:1.6;
  }
  .ayah strong {
    display:block; font-size:1.4rem; margin-bottom:.5em;
  }
  .ayah .arabic {
    font-family:'Scheherazade New',serif;
    font-size:1.8rem; direction:rtl; margin-bottom:.5em;
  }

  /* Buttons */
  .buttons {
    display:flex; justify-content:center; gap:1em; flex-wrap:wrap;
    z-index:1;
  }
  .buttons button {
    padding:.75em 1.5em; border:2px solid var(--btn-day);
    background:transparent; color:inherit; border-radius:5px;
    cursor:pointer; font-weight:bold;
    transition:background .3s,color .3s;
  }
  body.night .buttons button { border-color:var(--btn-night) }
  .buttons button:hover {
    background:var(--btn-day); color:#333;
  }
  body.night .buttons button:hover {
    background:var(--btn-night); color:#333;
  }

  /* Subscribe Bar */
  .subscribe-bar {
    position:absolute; bottom:40px; left:50%;
    transform:translateX(-50%);
    display:flex; width:80%; max-width:500px;
    box-shadow:0 4px 12px rgba(0,0,0,0.4);
    z-index:1;
  }
  .subscribe-bar input {
    flex:1;padding:.75em; border:none;font-size:1rem;
    border-radius:5px 0 0 5px;
  }
  .subscribe-bar button {
    padding:.75em 1em; border:none; background:var(--btn-day);
    color:#333;font-weight:bold;border-radius:0 5px 5px 0;
    cursor:pointer;transition:background .3s;
  }
  body.night .subscribe-bar button { background:var(--btn-night) }
</style>
</head>
<body>

  <!-- Bird containers: we'll script loop later -->
  <div class="bird-container" id="b1"><div class="bird"></div></div>
  <div class="bird-container" id="b2"><div class="bird"></div></div>
  <div class="bird-container" id="b3"><div class="bird"></div></div>
  <div class="bird-container" id="b4"><div class="bird"></div></div>

  <header>
    <div class="logo"><img src="Livebyquran Logo.PNG" alt="Live by Quran"></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="books.html">Books</a>
      <a href="lectures.html">Audio Lectures</a>
      <a href="articles.html">Articles</a>
      <a href="qa.html">Q&A</a>
      <a href="#"><img src="email-icon.png" alt="Contact" style="height:24px;"></a>
    </nav>
  </header>

  <div id="date-display">
    <span class="isl">Loading Islamic date…</span>
    <span class="greg">Loading Gregorian date…</span>
  </div>

  <div class="main">
    <h1>Live by Quran</h1>
    <div class="tagline">Learn. Reflect. Transform.</div>
    <div class="ayah" id="ayah">Loading Ayah…</div>
    <div class="buttons">
      <button onclick="location.href='books.html'">Explore Books</button>
      <button onclick="location.href='lectures.html'">Listen to Lectures</button>
      <button onclick="location.href='articles.html'">Read Articles</button>
      <button onclick="location.href='qa.html'">Q&A</button>
    </div>
  </div>

  <div class="subscribe-bar">
    <input type="email" placeholder="Email address">
    <button>Subscribe</button>
  </div>

  <!-- PapaParse & Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    // 1) Day/Night & overlay
    function theme() {
      const h = new Date().getHours();
      document.body.classList.toggle('night', h<6||h>=18);
    }
    theme(); setInterval(theme,60000);

    // 2) Dates
    function showDates(){
      const n=new Date();
      document.querySelector('#date-display .greg').textContent =
        new Intl.DateTimeFormat('en-US',{weekday:'long',day:'numeric',month:'long',year:'numeric'}).format(n);
      document.querySelector('#date-display .isl').textContent =
        new Intl.DateTimeFormat('en-GB-u-ca-islamic',{day:'numeric',month:'long',year:'numeric'}).format(n)+' AH';
    }
    showDates(); setInterval(showDates,3600000);

    // 3) Ayah of the Day
    Papa.parse('ayahs.csv',{download:true,header:true,skipEmptyLines:true,
      complete(r){
        const arr=r.data.filter(a=>a.surah&&a.translation);
        const t=new Date(), s=new Date(t.getFullYear(),0,0);
        const idx=Math.floor((t-s)/86400000)%arr.length, v=arr[idx];
        if(v) document.getElementById('ayah').innerHTML =
          `<strong>${v.surah} — Verse ${v.verse}</strong>
           <div class="arabic">${v.arabic}</div>
           <div>${v.translation}</div>`;
      },
      error(){document.getElementById('ayah').textContent='Error loading Ayah.';}
    });

    // 4) Randomize bird paths
    function initBird(id){
      const el = document.getElementById(id);
      // random start Y between 0–80vh:
      const sy = Math.random()*80 + 'vh';
      // random drift up to +/- 10vh
      const drift = (Math.random()*20-10)+'vh';
      // random scale 0.3–0.6
      const sc = (Math.random()*0.3+0.3).toFixed(2);
      // random duration 30–60s
      const dur = (Math.random()*30+30).toFixed(1)+'s';
      el.style.setProperty('--start-y', sy);
      el.style.setProperty('--drift', drift);
      el.style.setProperty('--scale', sc);
      el.style.animationName = 'fly-right';
      el.style.animationDuration = dur;
    }
    ['b1','b2','b3','b4'].forEach(initBird);
  </script>
</body>
</html>
